<div class="create-user">
  <form nz-form [formGroup]="createUserForm" (ngSubmit)="onSubmit()">
  <ng-container *ngFor="let control of controlRequestArray; trackBy: trackByKey">
      <nz-form-item>
        <nz-form-label [nzFor]="control.key">{{ control.label }}</nz-form-label>
        <nz-form-control>

          <!-- text / number -->
          <input *ngIf="control.type === 'text' || control.type === 'number'" nz-input [formControlName]="control.key" [id]="control.key"
            [placeholder]="control.placeholder || ''" [type]="control.type === 'number' ? 'number' : 'text'" />

          <!-- select -->
          <nz-select nzShowSearch *ngIf="control.type === 'select'" [formControlName]="control.key" [nzPlaceHolder]="control.placeholder || 'Chá»n...'" nzAllowClear>
            <nz-option *ngFor="let option of (control.options || []); trackBy: trackByValue" [nzValue]="option.value" [nzLabel]="option.text"></nz-option>
          </nz-select>

          <!-- date -->
          <nz-date-picker *ngIf="control.type === 'date'" [formControlName]="control.key"></nz-date-picker>

          <!-- file upload -->
          <nz-upload *ngIf="control.type === 'file'" nzListType="picture-card" [nzBeforeUpload]="beforeUpload" [nzFileList]="fileList"
            [nzShowButton]="fileList.length < 1" [nzPreview]="handlePreview">
            <div>
              <nz-icon nzType="plus"></nz-icon>
              <div style="margin-top: 8px">Upload</div>
            </div>
          </nz-upload>

          <nz-modal *ngIf="control.type === 'file'" [nzVisible]="previewVisible" [nzContent]="modalContent" [nzFooter]="null" (nzOnCancel)="previewVisible = false">
            <ng-template #modalContent>
              <img [src]="previewImage" style="width: 100%" />
            </ng-template>
          </nz-modal>

        </nz-form-control>
      </nz-form-item>
    </ng-container>
  </form>
</div>